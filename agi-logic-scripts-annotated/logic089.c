if (isset(newRoom))
{  load.view.v(currentEgoView);  current.view(ego, v223);  v58 = 0;  v31 = 0;  set(f46);  set.horizon(1);  load.view(View5);  load.view(View200);  v220 = 131;  if (isset(f51) && !isset(f52))
  {    v220 = 132;    load.view(View201);  }  if (isset(f52) && !isset(f53))
  {    v220 = 133;  }  if (isset(f53))
  {    v220 = 134;  }  load.pic(v220);  draw.pic(v220);  discard.pic(v220);  if (v220 == 131)
  {    if (!isset(f54))
    {      add.to.pic(View200, 0, 0, 3, 48, 4, 4);    }    if (!isset(f55))
    {      add.to.pic(View200, 0, 0, 34, 48, 4, 4);    }    if (!isset(f56))
    {      add.to.pic(View200, 0, 0, 65, 48, 4, 4);    }    if (!isset(f57))
    {      add.to.pic(View200, 0, 0, 96, 48, 4, 4);    }    if (!isset(f58))
    {      add.to.pic(View200, 0, 0, 127, 48, 4, 4);    }    if (!isset(f59))
    {      add.to.pic(View200, 0, 0, 3, 81, 4, 4);    }    if (!isset(f60))
    {      add.to.pic(View200, 0, 0, 34, 81, 4, 4);    }    if (!isset(f61))
    {      add.to.pic(View200, 0, 0, 65, 81, 4, 4);    }    if (!isset(f62))
    {      add.to.pic(View200, 0, 0, 96, 81, 4, 4);    }    if (!isset(f63))
    {      add.to.pic(View200, 0, 0, 127, 81, 4, 4);    }    if (!isset(f64))
    {      add.to.pic(View200, 0, 0, 3, 114, 4, 4);    }    if (!isset(f65))
    {      add.to.pic(View200, 0, 0, 34, 114, 4, 4);    }    if (!isset(f66))
    {      add.to.pic(View200, 0, 0, 65, 114, 4, 4);    }    if (!isset(f67))
    {      add.to.pic(View200, 0, 0, 96, 114, 4, 4);    }    if (!isset(f68))
    {      add.to.pic(View200, 0, 0, 127, 114, 4, 4);    }    if (!isset(f69))
    {      add.to.pic(View200, 0, 0, 3, 147, 4, 4);    }    if (!isset(f70))
    {      add.to.pic(View200, 0, 0, 34, 147, 4, 4);    }    if (!isset(f71))
    {      add.to.pic(View200, 0, 0, 65, 147, 4, 4);    }    if (!isset(f72))
    {      add.to.pic(View200, 0, 0, 96, 147, 4, 4);    }    if (!isset(f73))
    {      add.to.pic(View200, 0, 0, 127, 147, 4, 4);    }  }  if (v220 == 132)
  {    v36 = v53;    v36 += v53;    v36 += v53;    v36 += v53;    if (v62 == 2)
    {      v36 += 12;    }    v38 = 125;    v38 -= v36;    v37 = 143;    v36 += v36;    v37 -= v36;    if ((v37 > 143 ||      v62 == 4))
    {      v37 = 143;      v38 = 125;    }    animate.obj(o1);    set.view(o1, View201);    position.v(o1, v37, v38);    set.priority(o1, 4);    ignore.objs(o1);    draw(o1);  }  if (v220 == 133)
  {    if (!isset(f59))
    {      add.to.pic(View200, 0, 0, 34, 48, 4, 4);    }    if (!isset(f60))
    {      add.to.pic(View200, 0, 0, 65, 48, 4, 4);    }    if (!isset(f61))
    {      add.to.pic(View200, 0, 0, 96, 48, 4, 4);    }    if (!isset(f57))
    {      add.to.pic(View200, 0, 0, 3, 81, 4, 4);    }    if (!isset(f58))
    {      add.to.pic(View200, 0, 0, 34, 81, 4, 4);    }    if (!isset(f62))
    {      add.to.pic(View200, 0, 0, 96, 81, 4, 4);    }    if (!isset(f63))
    {      add.to.pic(View200, 0, 0, 127, 81, 4, 4);    }    if (!isset(f56))
    {      add.to.pic(View200, 0, 0, 3, 114, 4, 4);    }    if (!isset(f64))
    {      add.to.pic(View200, 0, 0, 127, 114, 4, 4);    }    if (!isset(f54))
    {      add.to.pic(View200, 0, 0, 3, 147, 4, 4);    }    if (!isset(f53))
    {      add.to.pic(View200, 0, 0, 127, 147, 4, 4);    }  }  if (v220 == 134)
  {    if (!isset(f57))
    {      add.to.pic(View200, 0, 0, 3, 48, 4, 4);    }    if (!isset(f58))
    {      add.to.pic(View200, 0, 0, 34, 48, 4, 4);    }    if (!isset(f59))
    {      add.to.pic(View200, 0, 0, 65, 48, 4, 4);    }    if (!isset(f56))
    {      add.to.pic(View200, 0, 0, 96, 48, 4, 4);    }    if (!isset(f63))
    {      add.to.pic(View200, 0, 0, 34, 81, 4, 4);    }    if (!isset(f64))
    {      add.to.pic(View200, 0, 0, 65, 81, 4, 4);    }    if (!isset(f55))
    {      add.to.pic(View200, 0, 0, 127, 81, 4, 4);    }    if (!isset(f61))
    {      add.to.pic(View200, 0, 0, 34, 114, 4, 4);    }    if (!isset(f54))
    {      add.to.pic(View200, 0, 0, 96, 114, 4, 4);    }    if (!isset(f60))
    {      add.to.pic(View200, 0, 0, 34, 147, 4, 4);    }    if (!isset(f53))
    {      add.to.pic(View200, 0, 0, 65, 147, 4, 4);    }  }  set.view(ego, View5);  release.priority(ego);  position(ego, 77, 77);  start.motion(ego);  v59 = 1;  cycle.time(ego, v59);  v60 = 1;  step.time(ego, v60);  v61 = 1;  step.size(ego, v61);  draw(ego);  show.pic();  if (v220 == 131)
  {    if (isset(f61))
    {      print("The magic map's faded ink has brightened, but only in those places "        "where you have been!");    }    else
    {      print("The magic map's ink has faded away. So far, it isn't much help.");    }  }  print("Press F6 to teleport.\n\nPress F8 to put the map away.");  return();}v221 = 0;if (v220 == 131)
{  if (isset(f54) &&    posn(ego, 3, 23, 33, 54))
  {    v221 = 11;  }  if (isset(f55) &&    posn(ego, 34, 23, 64, 54))
  {    v221 = 12;  }  if (isset(f56) &&    posn(ego, 65, 23, 95, 54))
  {    v221 = 13;  }  if (isset(f57) &&    posn(ego, 96, 23, 126, 54))
  {    v221 = 14;  }  if (isset(f58) &&    posn(ego, 127, 23, 155, 54))
  {    v221 = 15;  }  if (isset(f59) &&    posn(ego, 3, 55, 33, 87))
  {    v221 = 16;  }  if (isset(f60) &&    posn(ego, 34, 55, 64, 87))
  {    v221 = 17;  }  if (isset(f61) &&    posn(ego, 65, 55, 95, 87))
  {    v221 = 18;  }  if (isset(f62) &&    posn(ego, 96, 55, 126, 87))
  {    v221 = 19;  }  if (isset(f63) &&    posn(ego, 127, 55, 155, 87))
  {    v221 = 20;  }  if (isset(f64) &&    posn(ego, 3, 88, 33, 120))
  {    v221 = 21;  }  if (isset(f65) &&    posn(ego, 34, 88, 64, 120))
  {    v221 = 22;  }  if (isset(f66) &&    posn(ego, 65, 88, 95, 120))
  {    v221 = 23;  }  if (isset(f67) &&    posn(ego, 96, 88, 126, 120))
  {    v221 = 24;  }  if (isset(f68) &&    posn(ego, 127, 88, 155, 120))
  {    v221 = 25;  }  if (isset(f69) &&    posn(ego, 3, 121, 33, 153))
  {    v221 = 26;  }  if (isset(f70) &&    posn(ego, 34, 121, 64, 153))
  {    v221 = 27;  }  if (isset(f71) &&    posn(ego, 65, 121, 95, 153))
  {    v221 = 28;  }  if (isset(f72) &&    posn(ego, 96, 121, 126, 153))
  {    v221 = 29;  }  if (isset(f73) &&    posn(ego, 127, 121, 155, 153))
  {    v221 = 30;  }}if (v220 == 132)
{  distance(ego, o1, v36);  get.posn(o1, v37, v38);  --v37;  if (v36 < 14 &&    v40 > v37)
  {    random(79, 86, v221);  }  else
  {    v221 = 31;  }}if (v220 == 133)
{  if (isset(f59) &&    posn(ego, 34, 23, 64, 54))
  {    v221 = 54;  }  if (isset(f60) &&    posn(ego, 65, 23, 95, 54))
  {    v221 = 55;  }  if (isset(f61) &&    posn(ego, 96, 23, 126, 54))
  {    v221 = 56;  }  if (isset(f57) &&    posn(ego, 3, 55, 33, 87))
  {    v221 = 52;  }  if (isset(f58) &&    posn(ego, 34, 55, 64, 87))
  {    v221 = 53;  }  if (isset(f62) &&    posn(ego, 96, 55, 126, 87))
  {    v221 = 57;  }  if (isset(f63) &&    posn(ego, 127, 55, 155, 87))
  {    v221 = 58;  }  if (isset(f56) &&    posn(ego, 3, 88, 33, 120))
  {    v221 = 51;  }  if (isset(f64) &&    posn(ego, 127, 88, 155, 120))
  {    v221 = 59;  }  if (isset(f54) &&    posn(ego, 3, 121, 33, 153))
  {    v221 = 49;  }  if (isset(f53) &&    posn(ego, 127, 121, 155, 153))
  {    v221 = 61;  }}if (v220 == 134)
{  if (isset(f57) &&    posn(ego, 3, 23, 33, 54))
  {    v221 = 65;  }  if (isset(f58) &&    posn(ego, 34, 23, 64, 54))
  {    v221 = 66;  }  if (isset(f59) &&    posn(ego, 65, 23, 95, 54))
  {    v221 = 67;  }  if (isset(f56) &&    posn(ego, 96, 23, 126, 54))
  {    v221 = 64;  }  if (isset(f63) &&    posn(ego, 34, 55, 64, 87))
  {    v221 = 71;  }  if (isset(f64) &&    posn(ego, 65, 55, 95, 87))
  {    v221 = 72;  }  if (isset(f55) &&    posn(ego, 127, 55, 155, 87))
  {    v221 = 63;  }  if (isset(f61) &&    posn(ego, 34, 88, 64, 120))
  {    v221 = 69;  }  if (isset(f54) &&    posn(ego, 96, 88, 126, 120))
  {    v221 = 62;  }  if (isset(f60) &&    posn(ego, 34, 121, 64, 153))
  {    v221 = 68;  }  if (isset(f53) &&    posn(ego, 65, 121, 95, 153))
  {    v221 = 61;  }}if ((said("capture", "alexander", "here") ||  said("capture", "alexander", "here") ||  said("magic", "map", "bug", "alexander", "here") ||  said("magic", "map", "bug", "alexander", "here") ||  said("bug", "alexander", "here") ||  said("bug", "alexander", "here") ||  said("magic", "map", "capture", "alexander", "here") ||  said("magic", "map", "capture", "alexander", "here") ||  said("board", "here") ||  said("board", "here")))
{  set(f220);}if ((said("examine", "area") ||  said("examine", "back", "area") ||  said("examine") ||  said("examine", "away") ||  said("examine", "up") ||  said("examine", "away", "from", "map") ||  said("quit", "examine", "map") ||  said("quit", "examine", "magic", "map") ||  said("quit", "magic", "map") ||  said("add", "area") ||  said("board", "back", "area")))
{  set(f220);  v221 = previousRoom;}if ((controller(c19) ||  controller(c24)))
{  set(f220);}if ((controller(c13) ||  controller(c23)))
{  set(f220);  v221 = previousRoom;}if (controller(c2))
{  print("Press F6 to teleport.\n\nPress F8 to put the map away.");}if (isset(f220))
{  reset(f220);  if (v221 <= 0)
  {    print("The map looks blank there!");  }  else
  {    print("And so it shall be!");    erase(ego);    set.view.v(ego, v223);    currentEgoView = v223;    reset(f46);    if (v221 == previousRoom)
    {      v44 = 30;    }    else
    {      v44 = 14;    }    if (monitorType != MONO)
    {      clear.lines(22, 22, BLACK);    }    new.room.v(v221);  }}return();[Messages#message 1 "And so it shall be!"#message 2 "The map looks blank there!"#message 3 ""#message 4 "The magic map's faded ink has brightened, but only in those places where you have been!"#message 5 "%v221."#message 6 " "#message 7 "The magic map's ink has faded away. So far, it isn't much help."#message 8 "Press F6 to teleport.\n\nPress F8 to put the map away."
